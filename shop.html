<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title></title>
<link href="css/common.css" rel="stylesheet" type="text/css">
</head>

<body>
<div class="wrap shop-bg">
    <div class="shop-head">
        <div class="s-box">
            <div class="shop-search">
                <form action="">
                    <input class="shop-i" type=text"" placeholder="输入商品名称">
                    <input class="shop-b" type="submit" value="搜索">
                </form>
            </div>
            <a class="view-car" href="shop-car.html"><img src="images/icon-car.png"><br>查<br>看<br>购<br>物<br>车</a>
        </div>
    </div>

    <dl class="shop-body">
        <dd class="id_1">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_2">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_3">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_4">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_5">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_6">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_7">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
        <dd class="id_8">
            <a class="fl" onclick="add_car(this)" href="javascript:void(0)">加入购物车</a>
            <a class="fr" href="">查看详情</a>
            <span class="shop-list-tit">琥珀珍珠</span>
            <span>RMB: 123.00</span>
        </dd>
    </dl>

    <div class="car-pop transition">
        <div class="s-box">
            <div class="car-pop-top">
                <b onclick="close_pop()" class="car-pop-close"><img class="wImg" src="images/icon-close.png"></b>
                <img class="pic" src="images/shop-pic.jpg">
                <span>￥ 36.00</span>
                <i>商品编号：<b class="number"></b></i>
            </div>
            <div class="car-sel">
                <p>尺码</p>
                <label class="on"><input type="radio" name="sel" checked value="100*100">100*100</label>
                <label><input type="radio" name="sel" value="200*200">200*200</label>
                <label><input type="radio" name="sel" value="300*300">300*300</label>
                <label><input type="radio" name="sel" value="400*400">400*400</label>
            </div>
            <div class="shop-right car-tools">
                <p class="tools">
                    数量
                  <span class="num">
                    <b class="cut" onclick="cut(this)">-</b>
                    <input type="tel" value="1" readonly class="add-num">
                    <b class="add" onclick="add(this)">+</b>
                  </span>
                </p>
            </div>
            <a onclick="submit_pop()" class="carfixed-btn" href="javascript:void(0)">确定</a>
        </div>
    </div>
</div>
<input type="hidden" id="arrbox">
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script type="text/javascript">
  function cut(obj){
    var cutnum = $(obj).parent().find("input").val();
    var num = cutnum -1;
    if(num<0){
      $(obj).parent().find("input").val("0")
    }else{
      $(obj).parent().find("input").val(num)
    }
  }

  function add(obj){
    var addnum = $(obj).parent().find("input").val();
    var num = parseInt(addnum) + 1;
    $(obj).parent().find("input").val(num)
  }

  function add_car(obj){
      var getClass = $(obj).parent().attr('class');
      var myid = getClass.replace(/id_/gm,'');
      console.log(myid + "加入了购物车");
      $(".number").text(myid);
      $(".car-pop").css({"top":"27.8%","height":"auto","overflow":"visible"});
      $(".shop-search").hide();
      $(".view-car").hide()
  }

  function close_pop(){
     $(".car-pop").css({"top":"120%","height":"0","overflow":"hidden"});
     $(".shop-search").show();
     $(".view-car").show()
  }
  function submit_pop(){
      var id = $(".number").text();
      var type = $("input[name='sel']:checked").val();
      var num =$(".add-num").val();
      var arrbox = $.cookie("newarr");
        if (typeof(arrbox)=="undefined") {
            arrbox=''
        }
      if(arrbox == ''){
          var arrdata ='{"gid"' + ':"' + id + '"' + ',' + '"num"' + ':"' + type  + '"' + ',' + '"specs"' + ':"' + num + '"}' ;
      }else{
          var arrdata =arrbox +','+'{"gid"' + ':"' + id + '"' + ',' + '"num"' + ':"' + type  + '"' + ',' + '"specs"' + ':"' + num + '"}' ;
      }

    $.cookie('newarr', arrdata);
     $(".car-pop").css({"top":"120%","height":"0","overflow":"hidden"});
     $(".shop-search").show();
     $(".view-car").show()
  }

  $(function(){
      $('.car-sel label').click(function () {
          $(".car-sel label").each(function(){
              $(this).removeClass('on');
              $(this).find("input").attr('checked', false);
          })
          $(this).addClass('on');
          $(this).find("input").attr('checked', true);
      });
  })
</script>

</body>
</html>
